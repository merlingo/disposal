import React, { useEffect, useState } from "react";
import BootstrapTable from 'react-bootstrap-table-next';
import ToolkitProvider, { Search, CSVExport } from 'react-bootstrap-table2-toolkit';
import paginationFactory from 'react-bootstrap-table2-paginator';
import filterFactory, { textFilter } from 'react-bootstrap-table2-filter';

import { load } from '../../reducers/vulnSlice';
import { connect } from 'react-redux';

import vs from "./Vulnerability.module.scss";

const Vulnerability = (props) => {

  const { SearchBar, ClearSearchButton } = Search;
  // const { ExportCSVButton } = CSVExport;

  const columns = [
    {
      dataField: 'cve',
      text: 'CVE',
      filter: textFilter()
    }, 
    {
      dataField: 'Source',
      text: 'Source',
      filter:textFilter()

    }, 
    {
      dataField: 'description',
      text: 'Description',
      filter:textFilter()

    },
    {
      dataField:"tag",
      text:"TAG",
      filter:textFilter()
    }

  ];
  props.load();

  //const products = props.products;
  useEffect(() => {
  });
 
  return (
    <ToolkitProvider
      keyField="id"
      data={ props.products }
      columns={ columns }
      search
    >
      {
        props => (
          <div>
            <SearchBar { ...props.searchProps } className={vs.search_box} />
             <ClearSearchButton { ...props.searchProps } /> 
            <hr />
            <BootstrapTable
              { ...props.baseProps }
              pagination={ paginationFactory() }
              filter={ filterFactory() }
              bootstrap4 
              keyField='cve'
              striped
              hover
            />
          </div>
        )
      }
    </ToolkitProvider>
  );
};

function mapStateToProps(state) {
  return {
    loading: state.vulnerability.loading,
    products: state.vulnerability.products,
    paginationOption: state.vulnerability.paginationOption,
  };
}
const mapDispatchToProps = (dispatch) => {
  return {
    // dispatching plain actions
    load: () => dispatch(load())
  }
}
export default connect(mapStateToProps,mapDispatchToProps)(Vulnerability);

